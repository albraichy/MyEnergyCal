<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Calorie baseline estimator</title>
  <style>
    :root{
      --bg:#0b0f14;
      --card:#121926;
      --text:#e6eef8;
      --muted:#94a3b8;
      --accent:#7dd3fc;
      --shadow:0 6px 22px rgba(0,0,0,.35);
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:linear-gradient(180deg,#0b0f14 0%,#121826 100%);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px 16px;
    }
    .wrap{width:100%;max-width:820px;display:grid;gap:16px}
    .card{background:var(--card);border-radius:14px;box-shadow:var(--shadow);padding:20px}
    header{
      text-align:center;background:var(--card);border-radius:14px;box-shadow:var(--shadow);
      padding:18px 20px;display:grid;gap:10px;justify-items:center;
    }
    header h1{margin:0;font-size:20px;letter-spacing:.3px}
    .lang{display:flex;gap:8px;align-items:center;justify-content:center}
    .lang button{
      border:1px solid #2a3a52;background:#0f172a;color:var(--text);
      padding:6px 10px;border-radius:10px;cursor:pointer;font-weight:600;min-width:56px;
    }
    .lang button.active{background:var(--accent);color:#001018;border-color:transparent}
    .grid{display:grid;gap:14px}
    .grid.cols{grid-template-columns:repeat(3,minmax(0,1fr))}
    .field{display:flex;flex-direction:column;gap:6px;align-items:center}
    .field label{font-size:13px;color:var(--muted)}
    input[type="number"]{
      width:100%;border:1px solid #1f2937;background:#0f172a;color:var(--text);
      padding:12px 10px;border-radius:10px;font-size:15px;outline:none;max-width:220px;text-align:center;
    }
    input[type="number"]::placeholder{color:#64748b}
    .gender{display:flex;gap:18px;justify-content:center}
    .gender label{display:flex;gap:8px;align-items:center;color:var(--text);font-size:14px}
    .row{display:flex;gap:12px;justify-content:center;margin-top:4px}
    .btn{
      appearance:none;border:0;border-radius:12px;background:var(--accent);
      color:#001018;font-weight:700;padding:12px 18px;cursor:pointer;font-size:15px;
      box-shadow:0 8px 22px rgba(125,211,252,.25);min-width:120px;
    }
    .btn.secondary{background:#0f172a;color:var(--text);border:1px solid #28364d;box-shadow:none}
    .result{display:grid;gap:10px;justify-items:center;text-align:center}
    .rline{border:1px solid #27364f;background:#0c1424;padding:16px 18px;border-radius:12px;font-size:20px;min-width:60%;}
    .muted{color:var(--muted);font-size:12px;text-align:center}
    footer{color:var(--muted);font-size:12px;text-align:center}
    @media (max-width:600px){ .grid.cols{grid-template-columns:1fr} .rline{min-width:100%} }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1 id="title">Calorie baseline estimator</h1>
      <div class="lang" aria-label="Language">
        <button id="btn-en" class="active" type="button">EN</button>
        <button id="btn-ar" type="button">AR</button>
      </div>
    </header>

    <section class="card">
      <div class="grid">
        <div class="field">
          <label id="lab-gender">Gender</label>
          <div class="gender" role="radiogroup" aria-label="Gender">
            <label><input type="radio" name="gender" value="male" checked> <span id="lab-male">Male</span></label>
            <label><input type="radio" name="gender" value="female"> <span id="lab-female">Female</span></label>
          </div>
        </div>
        <div class="grid cols">
          <div class="field">
            <label for="age" id="lab-age">Age (years)</label>
            <input id="age" type="number" inputmode="numeric" min="10" max="100" step="1" placeholder="31">
          </div>
          <div class="field">
            <label for="weight" id="lab-weight">Weight (kg)</label>
            <input id="weight" type="number" inputmode="decimal" min="30" max="250" step="0.1" placeholder="90">
          </div>
          <div class="field">
            <label for="height" id="lab-height">Height (cm)</label>
            <input id="height" type="number" inputmode="decimal" min="120" max="230" step="0.1" placeholder="172">
          </div>
        </div>
        <div class="row">
          <button id="calc" class="btn" type="button">Calculate</button>
          <button id="reset" class="btn secondary" type="button">Reset</button>
        </div>
      </div>
    </section>

    <section class="card result" aria-live="polite">
      <div class="rline"><b id="avg-label">Daily maintenance calories</b>: <span id="avg">—</span></div>
      <div class="muted" id="foot-formulas">
        Methods: Mifflin–St Jeor; EER (IOM 2002); Harris–Benedict (Revised).
      </div>
    </section>

    <footer id="copyright">© 2025 — Minimal estimate based on three validated methods.</footer>
  </div>

<script>
(function(){
  const $ = (id)=>document.getElementById(id);
  const roundTo50 = (x)=> Math.round(x/50)*50;

  const i18n = {
    en: {
      dir:"ltr",
      title:"Calorie baseline estimator",
      gender:"Gender", male:"Male", female:"Female",
      age:"Age (years)", weight:"Weight (kg)", height:"Height (cm)",
      calc:"Calculate", reset:"Reset",
      avgLabel:"Daily maintenance calories",
      formulas:"Methods: Mifflin–St Jeor; EER (IOM 2002); Harris–Benedict (Revised).",
      copyright:"© 2025 — Minimal estimate based on three validated methods."
    },
    ar: {
      dir:"rtl",
      title:"مُقدِّر السعرات الأساسية",
      gender:"الجنس", male:"ذكر", female:"أنثى",
      age:"العمر (سنة)", weight:"الوزن (كجم)", height:"الطول (سم)",
      calc:"احسب", reset:"إعادة تعيين",
      avgLabel:"سعرات المحافظة اليومية",
      formulas:"الطرق المستخدمة: Mifflin–St Jeor؛ EER (IOM 2002)؛ Harris–Benedict (Revised).",
      copyright:"© 2025 — تقدير مبسّط مبني على ثلاث طرق موثوقة."
    }
  };

  function setLang(lang){
    const t = i18n[lang];
    document.documentElement.lang = lang;
    document.documentElement.dir  = t.dir;
    $('title').textContent = t.title;
    $('lab-gender').textContent = t.gender;
    $('lab-male').textContent = t.male;
    $('lab-female').textContent = t.female;
    $('lab-age').textContent = t.age;
    $('lab-weight').textContent = t.weight;
    $('lab-height').textContent = t.height;
    $('calc').textContent = t.calc;
    $('reset').textContent = t.reset;
    $('avg-label').textContent = t.avgLabel;
    $('foot-formulas').textContent = t.formulas;
    $('copyright').textContent = t.copyright;
    $('btn-en').classList.toggle('active', lang==='en');
    $('btn-ar').classList.toggle('active', lang==='ar');
  }

  function compute(){
    const gender = document.querySelector('input[name="gender"]:checked')?.value || 'male';
    const age = parseFloat($('age').value);
    const weight = parseFloat($('weight').value);
    const height = parseFloat($('height').value);
    if(!Number.isFinite(age) || !Number.isFinite(weight) || !Number.isFinite(height)){
      $('avg').textContent = '—'; return;
    }
    // Mifflin–St Jeor
    const mifflinBMR = (10*weight) + (6.25*height) - (5*age) + (gender === 'male' ? 5 : -161);
    const mifflinTDEE = mifflinBMR * 1.5;
    // EER
    const hM = height/100;
    const eer = (gender === 'male')
      ? (662 - (9.53*age) + (15.91*weight) + (539.6*hM))
      : (354 - (6.91*age) + (9.36*weight) + (726*hM));
    // Harris–Benedict (Revised) × 1.375
    const hbBMR = (gender === 'male')
      ? (66.4730 + (13.7516*weight) + (5.0033*height) - (6.7550*age))
      : (655.0955 + (9.5634*weight) + (1.8496*height) - (4.6756*age));
    const hbTDEE = hbBMR * 1.375;
    const avg = (mifflinTDEE + eer + hbTDEE) / 3;
    $('avg').textContent = Math.round(roundTo50(avg)) + " kcal";
  }

  function resetAll(){
    ['age','weight','height'].forEach(id=>{$(id).value='';});
    $('avg').textContent='—';
  }

  $('calc').addEventListener('click', compute);
  $('reset').addEventListener('click', resetAll);
  ['age','weight','height'].forEach(id=>{
    $(id).addEventListener('keydown', (e)=>{ if(e.key==='Enter') compute(); });
  });
  $('btn-en').addEventListener('click', ()=>setLang('en'));
  $('btn-ar').addEventListener('click', ()=>setLang('ar'));

  setLang('en');
})();
</script>
</body>
</html>
